@using Factory;
@model IEnumerable<Evento>

@{
    ViewBag.Title = "Index";
    Cliente cliente = ViewBag.cliente;
    int idcliente = cliente != null ? cliente.Id : 0;
}
<div>
    @using (Html.BeginForm("Index", "eventos", FormMethod.Get))
    {
        <div class="form-group">
            <label class=" control-label col-md-2">Identificacion </label>
            <div class="col-md-10">
                <input type="text" name="identificacion" class=" form-control" />
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">                    
                <input type="submit" value="Buscar" class="btn btn-primary " />
            </div>
        </div>
     }
<div>

    @if (cliente != null)
    {
        <div>
            <h4> Resultado de la busqueda</h4>
            <hr />
            <dl class="dl-horizontal">
                <dt>
                    Identificacion
                </dt>

                <dd>
                    @cliente.Identificacion
                </dd>

                <dt>
                    Nombre completo
                </dt>

                <dd>
                    @cliente.Nombre
                </dd>

                <dt>
                    Apellido
                </dt>

                <dd>
                    @cliente.Apellido
                </dd>
                <dt>
                    Edad
                </dt>

                <dd>
                    @cliente.Edad   años
                </dd>
            </dl>
        </div>
    }
</div>
</div>
<h2>Listado de eventos</h2>
<p>
    @Html.ActionLink("Crear evento", "Create", new { idCliente = idcliente },new { @class = "btn btn-primary" })
</p>
<table id="tblEventos" class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.IdCliente)
        </th>

        <th>
            @Html.DisplayNameFor(model => model.Identificacion )
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Motivo)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FechaEvento)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.CantidadPersonas)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Observaciones)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Estado)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.IdCliente)
    </td>

    <td>
        @Html.DisplayFor(modelItem => item.Identificacion )
    </td>

    <td>
        @Html.DisplayFor(modelItem => item.Motivo)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.FechaEvento)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.CantidadPersonas)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Observaciones)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Estado)
    </td>
    <td>
        @Html.ActionLink("Editar", "Edit", new { id = item.Id }, new { @class = "btn btn-warning" })

    </td>
</tr>
    }

</table>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
<script  type="text/javascript">
 //   $('#tblEventos').DataTable();
</script>
}
